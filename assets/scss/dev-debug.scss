// Main Styles - BEM Methodology

@use 'variables' as *;
@use 'mixins' as *;
@use 'animations' as *;
@use 'dev-debug-resizable';

.highlight-line {
  background: rgba(255, 255, 0, 0.25);
  transition: background 1s;
  display: block;
}

//.linenumber {
//  display: none;
//}

// Block: dev-debug
.dev-debug {

  &__scrollable-container {
    overflow: scroll;
    height: 100%;
    background: rgb(40, 44, 52)
  }

  // Element: Toggle Button
  // ============================================
  &__toggle {
    position: fixed;
    bottom: $toggle-bottom;
    right: $toggle-right;
    z-index: $z-index-toggle;

    width: $toggle-size;
    height: $toggle-size;
    border-radius: $border-radius-circle;

    background: $color-primary;
    color: $color-text-dark;

    border: none;
    cursor: pointer;
    box-shadow: $shadow-sm;

    @include transition;
    @include flex-center;

    &:hover {
      transform: scale(1.1);
    }

    &--active,
    &-active {
      background: $color-danger;
    }
  }

  // Element: Popover Container
  // ============================================
  &__popover {
    position: fixed !important;
    bottom: $popover-bottom;
    right: $popover-right;
    max-height: $popover-max-height;
    background: $color-bg-dark;
    border-radius: $border-radius-md;
    box-shadow: $shadow-md;
    z-index: $z-index-popover;
    display: flex;
    flex-direction: column;
    //overflow: hidden;
    border: 1px solid $color-border-dark;

    // Element: Popover Header
    &-header {
      border-bottom: 1px solid $color-border-dark;
      @include flex-between;
      padding: $spacing-xs $spacing-xl;

      p {
        font-size: $font-size-sm;
        margin: 0;
        color: $color-text-dark;
      }
    }
  }

  // Element: Empty State
  // ============================================
  &-empty-state,
  &__empty-state {
    text-align: center;
    margin: 50px;
    color: $color-text-dark-secondary;
  }

  // Element: Draggable
  // ============================================
  &-draggable,
  &__draggable {
    cursor: move;
    user-select: none;
  }

  // Element: Tabs Container
  // ============================================
  &__tabs-container {
    font-family: $font-family-base;
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0; // Important for flex scrolling
    overflow: hidden;
  }

  // Element: Tab
  // ============================================
  &__tab {
    flex: 1;
    @include button-reset;
    padding: $spacing-sm $spacing-lg; // Apply after button-reset to override padding: 0
    font-size: $font-size-md;
    font-weight: $font-weight-medium;
    @include transition;
    border-bottom: 2px solid transparent;
    color: $color-text-dark-secondary;
    background: none;

    &:hover {
      color: $color-text-dark;
      background: rgba(255, 255, 255, 0.05);
    }

    // Support both BEM modifier and legacy 'active' class
    &--active,
    &.active {
      border-bottom-color: $color-primary;
      color: $color-primary;
      background: $color-bg-dark;
    }
  }

  // Element: Tab Header Container
  // ============================================
  &__tab-header {
    display: flex;
    background: $color-bg-dark-secondary;
    border-bottom: 2px solid $color-border-dark;
    position: relative;

    // Element: Tab Indicator
    &-indicator {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      @include transition(all, 0.3s cubic-bezier(0.4, 0, 0.2, 1));
      border-radius: 3px 3px 0 0;
    }
  }

  // Element: Tab Content Container
  // ============================================
  &__tab-content {
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0; // Critical for flex scrolling
    @include scrollbar-dark;
  }

  // Element: Tab Panel
  // ============================================
  &__tab-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0; // Important for scrolling

    // Support both BEM modifier and legacy 'active' class
    &--active,
    &.active {
      position: relative;
      top: 0;
      left: 0;
      right: 0;
      opacity: 1;
      pointer-events: auto;
      animation: fadeIn $transition-slow ease;
    }

    h2 {
      color: $color-text-light;
      margin-bottom: $spacing-lg;
      font-size: $font-size-xxl;
      font-weight: $font-weight-bold;
    }

    p {
      color: $color-text-light-secondary;
      line-height: 1.6;
      margin-bottom: $spacing-md;
    }
  }

  // Element: Actions Container
  // ============================================
  &__actions {
    display: flex;
    gap: $spacing-sm;
    padding: $spacing-sm $spacing-lg;
    //background: $color-bg-dark-secondary;
    border-bottom: 1px solid $color-border-dark;
    flex-shrink: 0; // Prevent shrinking

    gap: 8px;
    padding: 6px;
  }

  // Element: Action Button (Refresh, Copy, Export)
  // ============================================
  &__action {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: $spacing-xs $spacing-md;
    background: $color-bg-dark;
    color: $color-text-dark;
    border: 1px solid $color-border-dark;
    border-radius: $border-radius-sm;
    cursor: pointer;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    @include transition;

    border: 1px solid color(srgb 0 0.14 0.1127);
    border-radius: 9px;
    color: color(srgb 0.1068 0.2664 0.2559);
    background: #b9dfd3;
    padding: 6px 10px;
    border-radius: 10px;
    /* border: none; */
    font-size: 11px;
    font-weight: 500;
    color: #1d3e3b;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    box-shadow: 0px 5px 8px rgb(0 0 0 / 0%), inset 0px -1px 7px rgb(0 0 0 / 84%);

    //background: color(srgb 0.6184 0.7973 0.73);
    //border: 1px solid color(srgb 0 0.14 0.1127);
    //border-radius: 9px;
    //color: color(srgb 0.1068 0.2664 0.2559);
    //background: #b9dfd3;
    //padding: 10px 32px;
    //border-radius: 20px;
    ///* border: none; */
    //font-size: 18px;
    //font-weight: 500;
    //color: #1d3e3b;
    //display: inline-flex;
    //align-items: center;
    //gap: 10px;
    //cursor: pointer;
    //box-shadow:
    //        //0px 1px 12px rgba(255, 255, 255),
    //        0px 5px 8px rgba(0, 0, 0),
    //        inset 0px -1px 7px rgba(0, 0, 0);
    //inset 3px 3px 6px rgba(0, 0, 0, -19.85);

    //&:hover {
    //  background: $color-border-dark;
    //  border-color: $color-primary;
    //  color: $color-primary;
    //}

    i {
      font-size: $font-size-xs;
    }

    // Modifier: Refresh Button
    &--refresh {
      &:hover i {
        animation: spin 1s linear infinite;
      }
    }

    // Modifier: Copy Button
    &--copy {
      // Additional styles if needed
    }

    // Modifier: Export Button
    &--export {
      // Additional styles if needed
    }
  }

  // Legacy class names for backward compatibility
  // ============================================
  &-actions {
    //@extend .dev-debug__actions;
  }

  &-refresh {
    //@extend .dev-debug__action;
    @extend .dev-debug__action--refresh;
  }

  &-copy {
    //@extend .dev-debug__action;
    @extend .dev-debug__action--copy;
  }

  &-export {
    //@extend .dev-debug__action;
    @extend .dev-debug__action--export;
  }

  &-follow-updates:has(input:checked) {
    background: green;
    color: white;
    border-color: green;

    input[type=checkbox] {
      &:checked {
        background: #ffffff;
        //border: none;
        //color: black;

        &:before {
          border: solid #000000;
          border-width: 0 2px 2px 0;
        }
      }
    }
    //input[type=checkbox]:checked:before {
    //  display: block;
    //  content: "";
    //  width: 4px;
    //  height: 7px;
    //  border: solid #000000;
    //  border-width: 0 2px 2px 0;
    //  transform: rotate(45deg);
    //}
    //:checked
  }

  &-tool-close {
    @include button-reset;
    @include flex-center;
    width: 32px;
    height: 32px;
    color: $color-text-dark-secondary;
    @include transition;

    &:hover {
      color: $color-text-dark;
      background: rgba(255, 255, 255, 0.1);
      border-radius: $border-radius-sm;
    }

    i {
      font-size: $font-size-md;
    }
  }

  // Element: Notifications Container
  // ============================================
  &__notifications {
    position: fixed;
    top: $spacing-xl;
    right: $spacing-xl;
    z-index: 999999;
    display: flex;
    flex-direction: column;
    gap: $spacing-sm;
    pointer-events: none;
  }

  // Element: Notification
  // ============================================
  &__notification {
    @include flex-between;
    gap: $spacing-md;
    padding: $spacing-md $spacing-lg;
    min-width: 280px;
    max-width: 400px;
    background: $color-bg-dark-secondary;
    border: 1px solid $color-border-dark;
    border-radius: $border-radius-md;
    box-shadow: $shadow-md;
    pointer-events: auto;
    @include transition;
    animation: fadeIn $transition-fast ease;

    // Modifier: Success
    &--success {
      border-left: 3px solid $color-primary;
    }

    // Modifier: Error
    &--error {
      border-left: 3px solid $color-danger;
    }

    // Modifier: Info
    &--info {
      border-left: 3px solid $color-text-dark-secondary;
    }

    // Element: Notification Message
    &-message {
      flex: 1;
      color: $color-text-dark;
      font-size: $font-size-sm;
      line-height: 1.4;
    }

    // Element: Notification Close Button
    &-close {
      @include button-reset;
      @include flex-center;
      width: 20px;
      height: 20px;
      color: $color-text-dark-secondary;
      @include transition;
      flex-shrink: 0;

      &:hover {
        color: $color-text-dark;
        background: rgba(255, 255, 255, 0.1);
        border-radius: $border-radius-sm;
      }

      i {
        font-size: $font-size-xs;
      }
    }
  }

  &-json-path {

    &-input-wrapper {
      position: relative;
    }

    &-path-input {
      transition: border-color 0.2s;
      font-family: 'Consolas', 'Monaco', monospace;

      &:focus {
        outline: none;
        border-color: #3b82f6;
      }
    }

    &-input-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 15px;
      height: 15px;
      color: #9ca3af;
      pointer-events: none;
    }

    &-dropdown {
      position: absolute;
      z-index: 10;
      //right: 20rem;
      width: 20rem;
      display: flex;
      flex-direction: column;
      justify-self: center;
      margin-top: 0.5rem;
      background: #000000;
      border: 2px solid #3b3d42;
      border-radius: 8px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      max-height: 320px;
      overflow-y: auto;

      &-item {
        padding: 0.75rem 1rem;
        cursor: pointer;
        transition: background-color 0.15s;
        border-bottom: 1px solid #3b3d42;

        &:hover {
          background-color: #41464b;
        }

        &-selected {
          background-color: #eff6ff;
          color: #1d4ed8;
        }

        &-path {
          font-family: 'Consolas', 'Monaco', monospace;
          font-size: 0.75rem;
          margin-bottom: 0.25rem;
          color: rgb(209, 154, 102);
        }

        &-value {
          font-size: 0.75rem;
          color: rgb(152, 195, 121);
          //color: #6b7280;
        }
      }
    }
  }
}
