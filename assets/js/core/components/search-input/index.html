<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autocomplete Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }

        h2 {
            color: #4ec9b0;
            margin-bottom: 30px;
        }

        .input-container {
            position: relative;
            margin-bottom: 30px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #3c3c3c;
            border-radius: 4px;
            background: #252526;
            color: #d4d4d4;
            box-sizing: border-box;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #007acc;
        }

        .ghost-text {
            position: absolute;
            left: 12px;
            top: 12px;
            font-size: 16px;
            color: #6a6a6a;
            pointer-events: none;
            white-space: pre;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #252526;
            border: 2px solid #007acc;
            border-top: none;
            border-radius: 0 0 4px 4px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .suggestion-item {
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid #3c3c3c;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover,
        .suggestion-item.active {
            background: #094771;
        }

        .hint {
            font-size: 14px;
            color: #858585;
            margin-top: 10px;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #252526;
            border-radius: 4px;
            border-left: 4px solid #4ec9b0;
        }
    </style>
</head>
<body>
    <h2>IDE-Style Autocomplete</h2>

    <div class="input-container">
        <input type="text" id="autocomplete" placeholder="Type 'set', 'con', or 'use'..." autocomplete="off">
        <span class="ghost-text" id="ghost"></span>
        <div class="suggestions" id="suggestions"></div>
    </div>

    <div class="hint">
        ðŸ’¡ Start typing and press <strong>Tab</strong> or <strong>â†’</strong> to complete, <strong>â†‘â†“</strong> to navigate suggestions
    </div>

    <div class="result" id="result" style="display: none;">
        <strong>Completed:</strong> <span id="resultText"></span>
    </div>

    <script>
        const input = document.getElementById('autocomplete');
        const ghost = document.getElementById('ghost');
        const suggestionsBox = document.getElementById('suggestions');
        const result = document.getElementById('result');
        const resultText = document.getElementById('resultText');

        // Available completions
        const completions = [
            'settings',
            'setup',
            'setInterval',
            'setTimeout',
            'console.log',
            'const',
            'constructor',
            'continue',
            'user',
            'username',
            'useState',
            'useEffect',
            'function',
            'return',
            'import',
            'export'
        ];

        let currentSuggestion = '';
        let filteredSuggestions = [];
        let selectedIndex = -1;

        function getMatches(text) {
            if (!text) return [];
            return completions.filter(c =>
                      c.toLowerCase().startsWith(text.toLowerCase())
            );
        }

        function updateGhostText(text) {
            const matches = getMatches(text);
            if (matches.length > 0 && text) {
                currentSuggestion = matches[0];
                ghost.textContent = text + currentSuggestion.slice(text.length);
            } else {
                currentSuggestion = '';
                ghost.textContent = '';
            }
        }

        function showSuggestions(matches) {
            if (matches.length === 0) {
                suggestionsBox.style.display = 'none';
                return;
            }

            suggestionsBox.innerHTML = matches.map((match, idx) =>
                      `<div class="suggestion-item ${idx === selectedIndex ? 'active' : ''}" data-value="${match}">${match}</div>`
            ).join('');

            suggestionsBox.style.display = 'block';

            // Add click handlers
            document.querySelectorAll('.suggestion-item').forEach((item, idx) => {
                item.addEventListener('click', () => {
                    input.value = item.dataset.value;
                    suggestionsBox.style.display = 'none';
                    ghost.textContent = '';
                    showResult(item.dataset.value);
                });
            });
        }

        function showResult(text) {
            resultText.textContent = text;
            result.style.display = 'block';
        }

        input.addEventListener('input', (e) => {
            const text = e.target.value;
            filteredSuggestions = getMatches(text);
            selectedIndex = -1;

            updateGhostText(text);
            showSuggestions(filteredSuggestions);

            if (!text) {
                result.style.display = 'none';
            }
        });

        input.addEventListener('keydown', (e) => {
            // Tab or Right Arrow to complete
            if ((e.key === 'Tab' || e.key === 'ArrowRight') && currentSuggestion && selectedIndex === -1) {
                e.preventDefault();
                input.value = currentSuggestion;
                ghost.textContent = '';
                suggestionsBox.style.display = 'none';
                showResult(currentSuggestion);
            }

            // Arrow Down
            if (e.key === 'ArrowDown' && filteredSuggestions.length > 0) {
                e.preventDefault();
                selectedIndex = Math.min(selectedIndex + 1, filteredSuggestions.length - 1);
                currentSuggestion = filteredSuggestions[selectedIndex];
                showSuggestions(filteredSuggestions);
            }

            // Arrow Up
            if (e.key === 'ArrowUp' && filteredSuggestions.length > 0) {
                e.preventDefault();
                selectedIndex = Math.max(selectedIndex - 1, -1);
                if (selectedIndex === -1) {
                    updateGhostText(input.value);
                } else {
                    currentSuggestion = filteredSuggestions[selectedIndex];
                }
                showSuggestions(filteredSuggestions);
            }

            // Enter to select
            if (e.key === 'Enter' && selectedIndex >= 0) {
                e.preventDefault();
                input.value = filteredSuggestions[selectedIndex];
                suggestionsBox.style.display = 'none';
                ghost.textContent = '';
                showResult(filteredSuggestions[selectedIndex]);
            }
        });

        // Hide suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!input.contains(e.target) && !suggestionsBox.contains(e.target)) {
                suggestionsBox.style.display = 'none';
            }
        });
    </script>
</body>
</html>
